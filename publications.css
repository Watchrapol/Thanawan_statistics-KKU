/* publications.css — ใช้เฉพาะหน้า publications.html */
.page-publications {
  .hero {
    padding-block: var(--space-7);
  }

  .hero__title {
    margin: 0 0 8px;
  }

  .chips {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
    margin-top: var(--space-3);
  }

  .chip {
    appearance: none;
    border: 1px solid var(--border);
    background: var(--surface);
    padding: .5rem .75rem;
    border-radius: 999px;
    cursor: pointer;
    font: inherit;
    line-height: 1;
    transition: background .2s, border-color .2s;
  }

  .chip:is(:hover, :focus-visible) {
    outline: none;
    background: var(--surface-2);
  }

  .chip.is-active,
  .chip[aria-pressed="true"] {
    background: var(--brand-weak);
    border-color: var(--brand);
  }

  .search {
    margin-top: 12px;
    max-width: 560px;
  }

  .search__input {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid var(--border);
    border-radius: 12px;
    font: inherit;
  }

  .result-count {
    margin-top: .5rem;
    font-size: .95rem;
    color: var(--text-2);
  }

  .year-heading {
    margin: 0 0 .75rem;
    font-size: 1.15rem;
    color: var(--text-2);
  }

  .pubs-onecol {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-4);
    margin-bottom: 28px;
  }

  .pub-item.card {
    padding: var(--space-5);
    border-radius: var(--radius);
  }

  .pub__title {
    margin: 0 0 6px;
    font-size: 1.25rem;
  }

  .pub__meta {
    margin: 0 0 10px;
  }

  .pub__desc {
    margin: 0 0 10px;
  }

  .actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 10px;
  }

  .meta {
    display: flex;
    gap: 8px;
    margin-top: 8px;
    padding: 0;
    list-style: none;
  }

  .pill {
    display: inline-block;
    padding: .25rem .5rem;
    border-radius: 999px;
    background: var(--surface-2);
    font-size: .875rem;
  }

  .back-top {
    margin-top: var(--space-6);
  }
}

/* 2 คอลัมน์บนจอใหญ่ (ถ้าต้องการก็ปลดคอมเมนต์)
@media (min-width:1280px){
  .page-publications .pubs-onecol{ grid-template-columns: 1fr 1fr; }
}
*/

.sr-only {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 1px, 1px);
  white-space: nowrap;
  border: 0;
}

/* เอฟเฟกต์ลอยขึ้นเมื่อโฟกัส/เอาเม้าชี้ */
.page-publications .pub-item.card {
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  will-change: transform;
}

/* hover และโฟกัสด้วยคีย์บอร์ดให้รู้สึกเท่ากัน */
.page-publications .pub-item.card:is(:hover, :focus-within) {
  transform: translateY(-4px);
  box-shadow:
    0 2px 6px rgba(0, 0, 0, .06),
    0 8px 20px rgba(0, 0, 0, .08);
  border-color: rgba(0, 0, 0, .06);
  /* ถ้ามีเส้นขอบอยู่แล้วจะดูนุ่มขึ้น */
}

/* ให้ทั้งการ์ดโฟกัสได้ง่ายขึ้นเมื่อมี element ด้านในถูกโฟกัส */
.page-publications .pub-item.card:focus-within {
  outline: 2px solid var(--brand, #3c77c4);
  outline-offset: 2px;
}

/* เคารพผู้ใช้ที่ลด motion */
@media (prefers-reduced-motion: reduce) {
  .page-publications .pub-item.card {
    transition: box-shadow .18s ease;
  }

  .page-publications .pub-item.card:is(:hover, :focus-within) {
    transform: none;
  }
}

/* การ์ดพร้อมชั้นไล่สี "เติมน้ำ" */
.page-publications .pub-item.card {
  position: relative;
  overflow: hidden;
  /* ให้ไล่สีไม่ล้นขอบโค้ง */
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  will-change: transform;
}

/* ชั้นไล่สีที่เติมจากล่างขึ้นบน */
.page-publications .pub-item.card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(to top,
      color-mix(in oklab, var(--brand,#1137b3) 16%, transparent),
      color-mix(in oklab, var(--brand, #1137b3) 8%, transparent) 40%,
      transparent 75%);
  transform-origin: bottom;
  transform: scaleY(0);
  /* เริ่มที่ 0 = ยังไม่เติม */
  opacity: .85;
  /* ปรับความทึบของไล่สี */
  transition: transform .28s ease;
  z-index: 0;
  /* อยู่ใต้คอนเทนต์ */
  pointer-events: none;
}

/* ยกการ์ด + เติมไล่สีตอน hover/focus */
.page-publications .pub-item.card:is(:hover, :focus-within) {
  transform: translateY(-4px);
  box-shadow:
    0 2px 6px rgba(0, 0, 0, .06),
    0 8px 20px rgba(0, 0, 0, .08);
  border-color: color-mix(in oklab, var(--brand,#1137b3) 30%, var(--border));
}

.page-publications .pub-item.card:is(:hover, :focus-within)::before {
  transform: scaleY(1);
  /* เติมเต็มความสูง */
}

/* ให้คอนเทนต์อยู่เหนือไล่สี */
.page-publications .pub-item.card>* {
  position: relative;
  z-index: 1;
}

/* โฟกัสด้วยคีย์บอร์ดให้เห็นชัด */
.page-publications .pub-item.card:focus-within {
  outline: 2px solid var(--brand,#1137b3);
  outline-offset: 2px;
}

/* เคารพผู้ใช้ที่ลด motion */
@media (prefers-reduced-motion: reduce) {
  .page-publications .pub-item.card {
    transition: box-shadow .18s ease, border-color .18s ease;
  }

  .page-publications .pub-item.card::before {
    transition: none;
    transform: none;
    opacity: .08;
  }

  .page-publications .pub-item.card:is(:hover, :focus-within) {
    transform: none;
  }
}